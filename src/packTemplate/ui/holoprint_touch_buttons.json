// Note: I wanted to make the buttons slide in via an animation when you show the menu, but I ran into a couple issues. First, I haven't found a way to play a sliding out animation when the menu is hidden. Second, when you start to press the toggle again to hide it, the animation will play again which looks bad. For these reasons I've commented it out, in case I figure it out later.

{
	"namespace": "holoprint:touch_buttons",
	
	"touch_buttons": {
		"type": "panel",
		"controls": [
			{
				"hud_visibility_wrapper": { // I already have a binding from #inventory_touch_button to #visible and I couldn't find out how to combine them without it crashing, so an additional element here is needed
					"type": "panel",
					"bindings": [
						{
							"binding_name": "#hud_visible",
							"binding_name_override": "#visible",
							"binding_type": "global"
						}
					],
					"controls": [
						{
							"expand_menu_toggle_button@hud_toggle": {
								"offset": [45, 1],
								"$toggle_view_binding_name": "expand_menu_toggle",
								"$button_unpressed_texture": "textures/ui/menu_button_unpressed",
								"$button_pressed_texture": "textures/ui/menu_button_pressed"
							}
						},
						{
							"material_list_toggle_button@hud_toggle": {
								"offset": [-45, 1],
								"$toggle_view_binding_name": "material_list_toggle",
								"$button_unpressed_texture": "textures/ui/material_list_button_unpressed",
								"$button_pressed_texture": "textures/ui/material_list_button_pressed"
							}
						},
						{
							"input_panel": {
								"type": "input_panel",
								"anchor_from": "top_middle",
								"anchor_to": "top_middle",
								"offset": [0, 28],
								"size": [175, 22],
								"layer": 33,
								"prevent_touch_input": true,
								"controls": [
									{
										"buttons_and_toggles@buttons_and_toggles": {
											// "anims": ["@holoprint:touch_buttons.slide_in_from_left_anim"],
											// "animation_reset_name": "button.expand_menu"
										}
									}
								],
								"bindings": [
									{
										"binding_type": "view",
										"source_control_name": "expand_menu_toggle",
										"source_property_name": "#toggle_state",
										"target_property_name": "#visible"
									}
								]
							}
						},
						{
							"material_list_wrapper": {
								"type": "stack_panel",
								"size": ["100%", "100% - 62px"],
								"anchor_from": "top_middle",
								"anchor_to": "top_middle",
								"offset": "$holoprint:material_list_offset",
								"controls": [
									{
										"condiditional_padding_1": { // the material list needs to move down when the menu is visible. these padding elements are visible depending on which bits of the menu are showing. because they're all in a stack_panel, when they're visible, they push the material list lower down.
											"type": "panel",
											"size": [0, 35],
											"bindings": [
												{
													"binding_type": "view",
													"source_control_name": "expand_menu_toggle",
													"source_property_name": "#toggle_state",
													"target_property_name": "#visible"
												}
											]
										}
									},
									{
										"condiditional_padding_2": {
											"type": "panel",
											"size": [0, 27],
											"bindings": [
												{
													"binding_type": "view",
													"source_control_name": "expand_menu_toggle",
													"source_property_name": "#toggle_state",
													"target_property_name": "#expand_menu_toggle_state"
												},
												{
													"binding_type": "view",
													"source_control_name": "show_full_menu_toggle",
													"source_property_name": "#toggle_state",
													"target_property_name": "#show_full_menu_toggle_state"
												},
												{
													"binding_type": "view",
													"source_property_name": "(#expand_menu_toggle_state and #show_full_menu_toggle_state)",
													"target_property_name": "#visible"
												}
											]
										}
									},
									{
										"material_list@holoprint:material_list.material_list": {
											"bindings": [
												{
													"binding_type": "view",
													"source_control_name": "material_list_toggle",
													"source_property_name": "#toggle_state",
													"target_property_name": "#visible"
												}
											]
										}
									}
								]
							}
						}
					]
				}
			}
		]
	},
	"hud_toggle": {
		"type": "input_panel",
		"anchor_from": "top_middle",
		"anchor_to": "top_middle",
		"size": [18, 18],
		"layer": 33,
		"prevent_touch_input": true,
		"controls": [
			{
				"toggle@generic_toggle_button": {
					"alpha": 0.8,
					"propagate_alpha": true,
					"$button_content": "common.empty_panel",
					"$use_regular_bg": false,
					"$default_texture": "$button_unpressed_texture",
					"$hover_texture": "$button_pressed_texture",
					"$pressed_texture": "$button_unpressed_texture",
					"$pressed_no_hover_texture": "$button_pressed_texture"
					// "$button_mappings": [
					// 	{
					// 		"from_button_id": "button.menu_select",
					// 		"to_button_id": "button.expand_menu",
					// 		"mapping_type": "pressed",
					// 		"handle_select": true
					// 	}
					// ]
				}
			}
		]
	},
	// "slide_in_from_left_anim": {
	// 	"anim_type": "offset",
	// 	"from": ["-100%", 0],
	// 	"to": [0, 0],
	// 	"duration": 0.325,
	// 	"easing": "out_quad"
	// },
	"buttons_and_toggles": {
		"type": "panel",
		"controls": [
			{
				"important_buttons_toggles_and_background@important_buttons_toggles_and_background": {
					"layer": 1
				}
			},
			{
				"less_important_buttons_and_toggles_input_panel": {
					"type": "input_panel",
					"anchor_from": "top_middle",
					"anchor_to": "top_middle",
					"offset": [0, 27],
					"size": [242, 22],
					"prevent_touch_input": true,
					"controls": [
						{
							"less_important_buttons_toggles_and_background@less_important_buttons_toggles_and_background": {
								// "anims": ["@holoprint:touch_buttons.slide_in_from_left_anim"],
								// "animation_reset_name": "button.show_full_menu"
							}
						}
					],
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "show_full_menu_toggle",
							"source_property_name": "#toggle_state",
							"target_property_name": "#visible"
						}
					]
				}
			}
		]
	},
	"important_buttons_toggles_and_background": { // there are two backgrounds here, one for when the full menu is shown. that one has the bottom clipped so it looks like it's more connected to the stuff below
		"type": "panel",
		"controls": [
			{
				"background@common.dialog_background_opaque": {
					"size": ["100%sm + 12px", "100%sm + 12px"],
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "show_full_menu_toggle",
							"source_property_name": "(not #toggle_state)",
							"target_property_name": "#visible"
						}
					]
				}
			},
			{
				"bottom_borderless_background@common.dialog_background_opaque": {
					"size": ["100%sm + 12px", "100%sm + 16px"],
					"offset": [0, 2],
					"clip_direction": "up",
					"clip_ratio": 0.1875,
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "show_full_menu_toggle",
							"source_property_name": "#toggle_state",
							"target_property_name": "#visible"
						}
					]
				}
			},
			{
				"important_buttons_and_toggles@important_buttons_and_toggles": {
					"layer": 1
				}
			}
		]
	},
	"important_buttons_and_toggles": {
		"type": "stack_panel",
		"orientation": "horizontal",
		"controls": [
			{
				"toggle_rendering_button@control_button": {
					"$icon": "toggle_rendering",
					"$armor_stand_item_id": "$holoprint:toggle_rendering_item"
				}
			},
			{ "p1@padding": {} },
			{
				"change_layer_buttons@double_control_button": {
					"$left_button_control_item": "$holoprint:decrease_layer_item",
					"$right_button_control_item": "$holoprint:increase_layer_item",
					"$icon": "change_layer"
				}
			},
			{ "p2@padding": {} },
			{
				"change_layer_mode_button@control_button": {
					"$icon": "change_layer_mode",
					"$armor_stand_item_id": "$holoprint:change_layer_mode_item"
				}
			},
			{ "p3@padding": {} },
			{
				"change_opacity_buttons@double_control_button": {
					"$left_button_control_item": "$holoprint:decrease_opacity_item",
					"$right_button_control_item": "$holoprint:increase_opacity_item",
					"$icon": "change_opacity"
				}
			},
			{ "p4@padding": {} },
			{
				"toggle_validating_button@control_button": {
					"$icon": "toggle_validating",
					"$armor_stand_item_id": "$holoprint:toggle_validating_item"
				}
			},
			{ "p5@padding": {} },
			{
				"show_full_menu_toggle_button@show_full_menu_toggle_button": {}
			}
		]
	},
	"less_important_buttons_toggles_and_background": {
		"type": "panel",
		"controls": [
			{
				"background@common.dialog_background_opaque": {
					"size": ["100%sm + 12px", "100%sm + 12px"]
				}
			},
			{
				"less_important_buttons_and_toggles@less_important_buttons_and_toggles": {
					"layer": 1
				}
			}
		]
	},
	"less_important_buttons_and_toggles": {
		"type": "stack_panel",
		"orientation": "horizontal",
		"controls": [
			{
				"move_x_buttons@double_control_button": {
					"$left_button_control_item": "$holoprint:decrease_x_item",
					"$right_button_control_item": "$holoprint:increase_x_item",
					"$icon": "move_hologram_x"
				}
			},
			{ "p1@padding": {} },
			{
				"move_y_buttons@double_control_button": {
					"$left_button_control_item": "$holoprint:decrease_y_item",
					"$right_button_control_item": "$holoprint:increase_y_item",
					"$icon": "move_hologram_y"
				}
			},
			{ "p2@padding": {} },
			{
				"move_z_buttons@double_control_button": {
					"$left_button_control_item": "$holoprint:decrease_z_item",
					"$right_button_control_item": "$holoprint:increase_z_item",
					"$icon": "move_hologram_z"
				}
			},
			{ "p3@padding": {} },
			{
				"rotate_buttons@double_control_button": {
					"$left_button_control_item": "$holoprint:rotate_anticlockwise_item",
					"$right_button_control_item": "$holoprint:rotate_clockwise_item",
					"$icon": "rotate_hologram"
				}
			},
			{ "p4@padding": {} },
			{
				"change_structure_buttons@double_control_button": {
					"$left_button_control_item": "$holoprint:previous_structure_item",
					"$right_button_control_item": "$holoprint:next_structure_item",
					"$icon": "change_structure"
				}
			},
			{ "p5@padding": {} },
			{
				"toggle_tint_button@control_button": {
					"$icon": "toggle_tint",
					"$armor_stand_item_id": "$holoprint:toggle_tint_item"
				}
			},
			{ "p6@padding": {} },
			{
				"backup_button@control_button": {
					"$icon": "backup_hologram",
					"$armor_stand_item_id": "$holoprint:backup_hologram_item"
				}
			}
		]
	},
	"show_full_menu_toggle_button": {
		"type": "panel",
		"size": "$holoprint:touch_button_size",
		"controls": [
			{
				"toggle@generic_toggle_button": {
					"$button_content": "holoprint:touch_buttons.show_full_menu_toggle_icon",
					"$button_content_size": ["100% - 9px", "100% - 9px"],
					"$toggle_view_binding_name": "show_full_menu_toggle"
					// "$button_mappings": [
					// 	{
					// 		"from_button_id": "button.menu_select",
					// 		"to_button_id": "button.show_full_menu",
					// 		"mapping_type": "pressed"
					// 	}
					// ]
				}
			}
		]
	},
	"show_full_menu_toggle_icon": {
		"type": "image",
		"texture": "textures/ui/menu_sliders_icon"
	},
	"padding": {
		"type": "panel",
		"size": [3, 0]
	},
	"generic_toggle_button@common_toggles.light_content_toggle": {
		"size": ["100% + 2px", "100% + 2px"],
		"$toggle_name": "",
		"$toggle_focus_enabled": false,
		"$default_border_visible": false,
		"$hover_border_visible": false,
		"$use_regular_bg|default": true,
		"variables": [
			{
				"requires": "$use_regular_bg",
				"$pressed_texture": "textures/ui/button_borderless_light"
			},
			{
				"requires": "$use_regular_bg",
				"$pressed_no_hover_texture": "textures/ui/button_borderless_lightpressednohover"
			}
		]
	},
	"control_button@generic_button": {
		"size": "$holoprint:touch_button_size",
		"$content": "holoprint:common.invis_armor_stand_holding_item",
		"$texture": "('textures/ui/' + $icon)"
	},
	"double_control_button": {
		"type": "panel",
		"size": "$holoprint:double_touch_button_size",
		"controls": [
			{
				"left_button@generic_button": {
					"size": ["50% + 1px", "100%"],
					"anchor_from": "left_middle",
					"anchor_to": "left_middle",
					"$content": "holoprint:common.invis_armor_stand_holding_item",
					"$armor_stand_item_id": "$left_button_control_item",
					"$texture": "textures/ui/chevron_grey_left",
					"$background_clip_ratio": 0.3,
					"$background_clip_direction": "left",
					"$icon_size": ["60%", "60%"],
					"$icon_anchor": "left_middle"
				}
			},
			{
				"right_button@generic_button": {
					"size": ["50% + 1px", "100%"],
					"anchor_from": "right_middle",
					"anchor_to": "right_middle",
					"$content": "holoprint:common.invis_armor_stand_holding_item",
					"$armor_stand_item_id": "$right_button_control_item",
					"$texture": "textures/ui/chevron_grey_right",
					"$background_clip_ratio": 0.3,
					"$background_clip_direction": "right",
					"$icon_size": ["60%", "60%"],
					"$icon_anchor": "right_middle"
				}
			},
			{
				"icon": {
					"type": "image",
					"texture": "('textures/ui/' + $icon)",
					"size": ["100% - 4px", "100% - 4px"],
					"layer": 3
				}
			}
		]
	},
	"generic_button": { // much less bloated than common_buttons.light_content_button
		"type": "button",
		"sound_name": "random.click",
		"sound_volume": 1.0,
		"sound_pitch": 1.0,
		"pressed_control": "pressed",
		"$background_clip_ratio|default": 0,
		"$background_clip_direction|default": "left",
		"$icon_size|default": ["100% - 5px", "100% - 5px"],
		"$icon_anchor|default": "center",
		"button_mappings": [
			{
				"from_button_id": "button.menu_select",
				"to_button_id": "button.menu_select",
				"mapping_type": "pressed"
			}
		],
		"controls": [
			{
				"background": {
					"type": "image",
					"texture": "textures/ui/button_borderless_light",
					"size": ["100%", "100%"],
					"clip_ratio": "$background_clip_ratio",
					"clip_direction": "$background_clip_direction",
					"clip_pixelperfect": true
				}
			},
			{
				"icon": {
					"type": "image",
					"texture": "$texture",
					"size": "$icon_size",
					"anchor_from": "$icon_anchor",
					"anchor_to": "$icon_anchor"
				}
			},
			{
				"pressed": {
					"type": "image",
					"texture": "textures/ui/button_borderless_lightpressednohover",
					"size": ["100%", "100%"],
					"layer": 1,
					"clip_ratio": "$background_clip_ratio",
					"clip_direction": "$background_clip_direction",
					"clip_pixelperfect": true,
					"controls": [
						{
							"content@$content": {}
						},
						{
							"icon": { // must be redefined in here as well for the pulsing animation to be applied to it. technically the original icon is still there, just hidden
								"type": "image",
								"texture": "$texture",
								"size": "$icon_size",
								"anchor_from": "$icon_anchor",
								"anchor_to": "$icon_anchor"
							}
						}
					],
					"anims": ["@holoprint:touch_buttons.pressed_button_anim"],
					"animation_reset_name": "button.menu_select"
				}
			}
		]
	},
	"pressed_button_anim": {
		"anim_type": "size", // reset size first and then instantly do the actual fading in animation
		"duration": 0,
		"next": "@holoprint:touch_buttons.fade_in_anim"
	},
	"fade_in_anim": {
		"anim_type": "alpha",
		"from": 0,
		"to": 1,
		"duration": 0.1,
		"next": "@holoprint:touch_buttons.wait_before_pulsing_anim"
	},
	"wait_before_pulsing_anim": {
		"anim_type": "wait",
		"duration": 0.3, // 0.1s from above + 0.3s = 0.4s, the same as in the Molang
		"next": "@holoprint:touch_buttons.pulse_size_anim"
	},
	"pulse_size_anim": {
		"anim_type": "size",
		"from": ["110%", "110%"],
		"to": ["100%", "100%"],
		"duration": 0.15,
		"next": "@holoprint:touch_buttons.pulse_size_anim" // references itself, creating a looping animation
	}
}