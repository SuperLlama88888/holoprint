// Note: I wanted to make the buttons slide in via an animation when you show the menu, but I ran into a couple issues. First, I haven't found a way to play a sliding out animation when the menu is hidden. Second, when you start to press the toggle again to hide it, the animation will play again which looks bad. For these reasons I've commented it out, in case I figure it out later.

{
	"namespace": "holoprint:touch_buttons",
	
	"touch_buttons": {
		"type": "panel",
		"controls": [
			{
				"hud_visibility_wrapper": { // I already have a binding from #inventory_touch_button to #visible and I couldn't find out how to combine them without it crashing, so an additional element here is needed
					"type": "panel",
					"bindings": [
						{
							"binding_name": "#hud_visible",
							"binding_name_override": "#visible",
							"binding_type": "global"
						}
					],
					"controls": [
						{
							"expand_menu_toggle_input_panel": {
								"type": "input_panel",
								"anchor_from": "top_left",
								"anchor_to": "top_left",
								"offset": [0, 74],
								"size": "$holoprint:touch_button_size",
								"layer": 33,
								"prevent_touch_input": true,
								"controls": [
									{
										"expand_menu_toggle_button@generic_toggle_button": {
											"$button_content": "holoprint:touch_buttons.expand_menu_toggle_icon",
											"$toggle_view_binding_name": "expand_menu_toggle",
											"$toggle_default_state": true
											// "$button_mappings": [
											// 	{
											// 		"from_button_id": "button.menu_select",
											// 		"to_button_id": "button.expand_menu",
											// 		"mapping_type": "pressed",
											// 		"handle_select": true
											// 	}
											// ]
										}
									}
								]
							}
						},
						{
							"input_panel": {
								"type": "input_panel",
								"anchor_from": "top_left",
								"anchor_to": "top_left",
								"offset": [0, 74],
								"size": [60, 100],
								"layer": 33,
								"prevent_touch_input": true,
								"controls": [
									{
										"buttons_and_toggles@buttons_and_toggles": {
											// "anims": ["@holoprint:touch_buttons.slide_in_from_left_anim"],
											// "animation_reset_name": "button.expand_menu"
										}
									}
								],
								"bindings": [
									{
										"binding_type": "view",
										"source_control_name": "expand_menu_toggle",
										"source_property_name": "#toggle_state",
										"target_property_name": "#visible"
									}
								]
							}
						},
						{
							"material_list@holoprint:material_list.material_list": {
								"bindings": [
									{
										"binding_type": "view",
										"source_control_name": "material_list_toggle",
										"source_property_name": "#toggle_state",
										"target_property_name": "#visible"
									}
								]
							}
						}
					]
				}
			}
		]
	},
	"expand_menu_toggle_icon": {
		"type": "image",
		"size": ["90%", "90%"],
		"texture": "textures/ui/menu_icon"
	},
	// "slide_in_from_left_anim": {
	// 	"anim_type": "offset",
	// 	"from": ["-100%", 0],
	// 	"to": [0, 0],
	// 	"duration": 0.325,
	// 	"easing": "out_quad"
	// },
	"buttons_and_toggles": {
		"type": "panel",
		"controls": [
			{
				"important_buttons_and_toggles": {
					"type": "grid",
					"grid_dimensions": [2, 5],
					"controls": [
						{
							"show_full_menu_toggle_button@show_full_menu_toggle_button": {
								"grid_position": [1, 0]
							}
						},
						{
							"material_list_toggle_button@material_list_toggle_button": {
								"grid_position": [0, 1]
							}
						},
						{
							"toggle_rendering_button@control_button": {
								"grid_position": [1, 1],
								"$icon": "toggle_rendering",
								"$armor_stand_item_id": "$holoprint:toggle_rendering_item"
							}
						},
						{
							"change_layer_buttons@double_control_button": {
								"grid_position": [0, 2],
								"$left_button_control_item": "$holoprint:decrease_layer_item",
								"$right_button_control_item": "$holoprint:increase_layer_item",
								"$icon": "change_layer"
							}
						},
						{
							"toggle_validating_button@control_button": {
								"grid_position": [0, 3],
								"$icon": "toggle_validating",
								"$armor_stand_item_id": "$holoprint:toggle_validating_item"
							}
						},
						{
							"change_layer_mode_button@control_button": {
								"grid_position": [1, 3],
								"$icon": "change_layer_mode",
								"$armor_stand_item_id": "$holoprint:change_layer_mode_item"
							}
						},
						{
							"change_opacity_buttons@double_control_button": {
								"grid_position": [0, 4],
								"$left_button_control_item": "$holoprint:decrease_opacity_item",
								"$right_button_control_item": "$holoprint:increase_opacity_item",
								"$icon": "change_opacity"
							}
						}
					]
				}
			},
			{
				"less_important_buttons_and_toggles_input_panel": {
					"type": "input_panel",
					"anchor_from": "top_left",
					"anchor_to": "top_left",
					"offset": [60, 0],
					"size": [60, 120],
					"prevent_touch_input": true,
					"controls": [
						{
							"less_important_buttons_and_toggles@less_important_buttons_and_toggles": {
								// "anims": ["@holoprint:touch_buttons.slide_in_from_left_anim"],
								// "animation_reset_name": "button.show_full_menu"
							}
						}
					],
					"bindings": [
						{
							"binding_type": "view",
							"source_control_name": "show_full_menu_toggle",
							"source_property_name": "#toggle_state",
							"target_property_name": "#visible"
						}
					]
				}
			}
		]
	},
	"less_important_buttons_and_toggles": {
		"type": "grid",
		"grid_dimensions": [2, 6],
		"controls": [
			{
				"move_x_buttons@double_control_button": {
					"grid_position": [0, 0],
					"$left_button_control_item": "$holoprint:decrease_x_item",
					"$right_button_control_item": "$holoprint:increase_x_item",
					"$icon": "move_hologram_x"
				}
			},
			{
				"move_y_buttons@double_control_button": {
					"grid_position": [0, 1],
					"$left_button_control_item": "$holoprint:decrease_y_item",
					"$right_button_control_item": "$holoprint:increase_y_item",
					"$icon": "move_hologram_y"
				}
			},
			{
				"move_z_buttons@double_control_button": {
					"grid_position": [0, 2],
					"$left_button_control_item": "$holoprint:decrease_z_item",
					"$right_button_control_item": "$holoprint:increase_z_item",
					"$icon": "move_hologram_z"
				}
			},
			{
				"rotate_buttons@double_control_button": {
					"grid_position": [0, 3],
					"$left_button_control_item": "$holoprint:rotate_anticlockwise_item",
					"$right_button_control_item": "$holoprint:rotate_clockwise_item",
					"$icon": "rotate_hologram"
				}
			},
			{
				"change_structure_buttons@double_control_button": {
					"grid_position": [0, 4],
					"$left_button_control_item": "$holoprint:previous_structure_item",
					"$right_button_control_item": "$holoprint:next_structure_item",
					"$icon": "change_structure"
				}
			},
			{
				"toggle_tint_button@control_button": {
					"grid_position": [0, 5],
					"$icon": "toggle_tint",
					"$armor_stand_item_id": "$holoprint:toggle_tint_item"
				}
			},
			{
				"backup_button@control_button": {
					"grid_position": [1, 5],
					"$icon": "backup_hologram",
					"$armor_stand_item_id": "$holoprint:backup_hologram_item"
				}
			}
		]
	},
	"show_full_menu_toggle_button": {
		"type": "panel",
		"size": "$holoprint:touch_button_size",
		"controls": [
			{
				"toggle@generic_toggle_button": {
					"$button_content": "holoprint:touch_buttons.show_full_menu_toggle_icon",
					"$toggle_view_binding_name": "show_full_menu_toggle"
					// "$button_mappings": [
					// 	{
					// 		"from_button_id": "button.menu_select",
					// 		"to_button_id": "button.show_full_menu",
					// 		"mapping_type": "pressed"
					// 	}
					// ]
				}
			}
		]
	},
	"show_full_menu_toggle_icon": {
		"type": "panel",
		"controls": [
			{
				"left": {
					"type": "image",
					"size": ["65%", "65%"],
					"anchor_to": "right_middle",
					"offset": [2, 0],
					"texture": "textures/ui/menu_icon"
				}
			},
			{
				"right": {
					"type": "image",
					"size": ["65%", "65%"],
					"anchor_to": "left_middle",
					"offset": [-2, 0],
					"texture": "textures/ui/menu_icon"
				}
			}
		]
	},
	"material_list_toggle_button": {
		"type": "panel",
		"size": "$holoprint:touch_button_size",
		"controls": [
			{
				"toggle@generic_toggle_button": {
					"$button_content": "holoprint:touch_buttons.material_list_toggle_icon",
					"$toggle_view_binding_name": "material_list_toggle"
				}
			}
		]
	},
	"material_list_toggle_icon": {
		"type": "image",
		"texture": "textures/ui/recipe_book_icon"
	},
	"generic_toggle_button@common_toggles.light_content_toggle": {
		"size": ["100% + 2px", "100% + 2px"],
		"$toggle_name": "",
		"$toggle_focus_enabled": false,
		"$default_border_visible": false,
		"$hover_border_visible": false,
		"$pressed_texture": "textures/ui/button_borderless_light",
		"$pressed_no_hover_texture": "textures/ui/button_borderless_lightpressednohover"
	},
	"control_button@generic_button": {
		"size": "$holoprint:touch_button_size",
		"$content": "holoprint:common.invis_armor_stand_holding_item",
		"$texture": "('textures/ui/' + $icon)"
	},
	"double_control_button": {
		"type": "panel",
		"size": "$holoprint:double_touch_button_size",
		"controls": [
			{
				"left_button@generic_button": {
					"size": ["50% + 1px", "100%"],
					"anchor_from": "left_middle",
					"anchor_to": "left_middle",
					"$content": "holoprint:common.invis_armor_stand_holding_item",
					"$armor_stand_item_id": "$left_button_control_item",
					"$texture": "textures/ui/chevron_grey_left",
					"$background_clip_ratio": 0.3,
					"$background_clip_direction": "left",
					"$icon_size": ["60%", "60%"],
					"$icon_anchor": "left_middle"
				}
			},
			{
				"right_button@generic_button": {
					"size": ["50% + 1px", "100%"],
					"anchor_from": "right_middle",
					"anchor_to": "right_middle",
					"$content": "holoprint:common.invis_armor_stand_holding_item",
					"$armor_stand_item_id": "$right_button_control_item",
					"$texture": "textures/ui/chevron_grey_right",
					"$background_clip_ratio": 0.3,
					"$background_clip_direction": "right",
					"$icon_size": ["60%", "60%"],
					"$icon_anchor": "right_middle"
				}
			},
			{
				"icon": {
					"type": "image",
					"texture": "('textures/ui/' + $icon)",
					"size": ["100% - 4px", "100% - 4px"],
					"layer": 3
				}
			}
		]
	},
	"generic_button": { // much less bloated than common_buttons.light_content_button
		"type": "button",
		"sound_name": "random.click",
		"sound_volume": 1.0,
		"sound_pitch": 1.0,
		"pressed_control": "pressed",
		"$background_clip_ratio|default": 0,
		"$background_clip_direction|default": "left",
		"$icon_size|default": ["100% - 2px", "100% - 2px"],
		"$icon_anchor|default": "center",
		"button_mappings": [
			{
				"from_button_id": "button.menu_select",
				"to_button_id": "button.menu_select",
				"mapping_type": "pressed"
			}
		],
		"controls": [
			{
				"background": {
					"type": "image",
					"texture": "textures/ui/button_borderless_light",
					"size": ["100%", "100%"],
					"clip_ratio": "$background_clip_ratio",
					"clip_direction": "$background_clip_direction",
					"clip_pixelperfect": true
				}
			},
			{
				"icon": {
					"type": "image",
					"texture": "$texture",
					"size": "$icon_size",
					"anchor_from": "$icon_anchor",
					"anchor_to": "$icon_anchor"
				}
			},
			{
				"pressed": {
					"type": "image",
					"texture": "textures/ui/button_borderless_lightpressednohover",
					"size": ["100%", "100%"],
					"layer": 1,
					"clip_ratio": "$background_clip_ratio",
					"clip_direction": "$background_clip_direction",
					"clip_pixelperfect": true,
					"controls": [
						{
							"content@$content": {}
						},
						{
							"icon": { // must be redefined in here as well for the pulsing animation to be applied to it. technically the original icon is still there, just hidden
								"type": "image",
								"texture": "$texture",
								"size": "$icon_size",
								"anchor_from": "$icon_anchor",
								"anchor_to": "$icon_anchor"
							}
						}
					],
					"anims": ["@holoprint:touch_buttons.pressed_button_anim"],
					"animation_reset_name": "button.menu_select"
				}
			}
		]
	},
	"pressed_button_anim": {
		"anim_type": "size", // reset size first and then instantly do the actual fading in animation
		"duration": 0,
		"next": "@holoprint:touch_buttons.fade_in_anim"
	},
	"fade_in_anim": {
		"anim_type": "alpha",
		"from": 0,
		"to": 1,
		"duration": 0.1,
		"next": "@holoprint:touch_buttons.wait_before_pulsing_anim"
	},
	"wait_before_pulsing_anim": {
		"anim_type": "wait",
		"duration": 0.3, // 0.1s from above + 0.3s = 0.4s, the same as in the Molang
		"next": "@holoprint:touch_buttons.pulse_size_anim"
	},
	"pulse_size_anim": {
		"anim_type": "size",
		"from": ["110%", "110%"],
		"to": ["100%", "100%"],
		"duration": 0.15,
		"next": "@holoprint:touch_buttons.pulse_size_anim" // references itself, creating a looping animation
	}
}